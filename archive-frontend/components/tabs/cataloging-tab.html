<!-- Cataloging Tab -->
<div x-show="showTab === 'cataloging'" class="p-6">
  <div class="flex items-center mb-6">
    <i class="fas fa-archive text-2xl text-green-500 mr-3"></i>
    <h2 class="text-2xl font-bold text-gray-800">
      Cataloging - Email Library Organization
    </h2>
  </div>

  <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
    <div>
      <h3 class="text-lg font-semibold mb-4">Batch Processing</h3>
      <div class="space-y-4">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2"
            >Date Range</label
          >
          <div class="grid grid-cols-2 gap-2">
            <input
              type="date"
              x-model="functions.cataloging.config.startDate"
              class="border border-gray-300 rounded-md px-3 py-2"
            />
            <input
              type="date"
              x-model="functions.cataloging.config.endDate"
              class="border border-gray-300 rounded-md px-3 py-2"
            />
          </div>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2"
            >Batch Size</label
          >
          <input
            type="number"
            x-model="functions.cataloging.config.batchSize"
            class="w-full border border-gray-300 rounded-md px-3 py-2"
            min="10"
            max="500"
          />
        </div>

        <!-- Debug Info -->
        <div class="mt-4 p-3 bg-gray-100 rounded text-xs" x-show="true">
          <h4 class="font-bold">Debug Info:</h4>
          <div>
            Start Date:
            <span
              x-text="functions.cataloging?.config?.startDate || 'not set'"
            ></span>
          </div>
          <div>
            End Date:
            <span
              x-text="functions.cataloging?.config?.endDate || 'not set'"
            ></span>
          </div>
          <div>
            Batch Size:
            <span
              x-text="functions.cataloging?.config?.batchSize || 'not set'"
            ></span>
          </div>
          <div>isLoading: <span x-text="isLoading"></span></div>
          <div>
            Functions Object:
            <span x-text="JSON.stringify(functions.cataloging, null, 2)"></span>
          </div>
        </div>

        <button
          @click="console.log('ðŸ”¥ BUTTON CLICK EVENT TRIGGERED!', $data); startCataloging()"
          class="w-full bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700 transition-colors"
          :disabled="isLoading"
        >
          <i class="fas fa-play mr-2"></i>
          <span x-text="isLoading ? 'Starting...' : 'Start Cataloging'"></span>
        </button>
      </div>
    </div>

    <div>
      <h3 class="text-lg font-semibold mb-4">Progress</h3>
      <div class="space-y-4">
        <div>
          <div class="flex justify-between text-sm mb-1">
            <span>Overall Progress</span>
            <span x-text="functions.cataloging.progress + '%'"></span>
          </div>
          <div class="w-full bg-gray-200 rounded-full h-2 progress-bar">
            <div
              class="progress-bar-fill bg-green-600 h-2 rounded-full transition-all duration-300"
              :style="`width: ${functions.cataloging.progress}%`"
            ></div>
          </div>
        </div>
        <div class="grid grid-cols-2 gap-4 text-sm">
          <div>
            <span class="text-gray-600">Processed:</span>
            <span
              class="font-semibold ml-1"
              x-text="functions.cataloging.processed"
            ></span>
          </div>
          <div>
            <span class="text-gray-600">Remaining:</span>
            <span
              class="font-semibold ml-1"
              x-text="functions.cataloging.remaining"
            ></span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
